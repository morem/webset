
<style type="text/css">
.xx{}

.config{
	padding:0 0 0 0;
	margin:0 0 0 0;
	border:none;
	position:relative;
}
.config_search{
	left:0;
	top:0;
	padding: 0 0 0 0;
	margin: 0 0 0 0;
}
.config_list{
	left:210px;
	top: 0;
	width:460px;
	height:490px;
	position:absolute;
}
.form_style{
	background:#ffffff;
}
#id_config_items_content{
   background:#CCCCCC; 
}
.config_items{
	width:100%;
	padding:0 0 0 0;
	margin: 0 0 0 0;
	vertical-align:middle;
	position:relative;

}
.config_items_title{
	width:100%;
	padding:0 0 0 0;
	margin: 0 0 0 0;
	vertical-align:middle;
	position:relative;
}
.config_item_status_title{	
	width:82px;
	padding:0 5px 0 5px;
	margin: 0 0 0 0;
	left:-1px;	
    float:left;
}
.config_item_pic_title{	
	width:60px;
	height:10px;
	padding:0 5px 0 5px;
	margin: 0 0 0 0;
	left:-1px;
	float:left;
	clear:right;
}
.config_items_item_pic{
	width:60px;
	height:50px;	
	padding:0 5px 0 5px;
	margin: 0 0 0 0;	
	left:-1px;
}
.config_items_item_title{
    width:400px;
	padding:0 5px 0 6px;
	margin: 0 0 0 0;	
}

.config_items_item_action_button:hover
{
    background:#4281B7;    
}

.config_items_item_action_button
{
    padding:2px 2px 2px 6px;
    margin:15px 5px 7px 5px;
    border-left:1px #cccccc solid;    
}

.config_items_checkbox{
	width:50px;	
	padding:0 5px 0 5px;
	margin: 0 0 0 0;
	margin-top:18px;
	left:-1px;
    float:left; 
}
.config_items_checkbox input{
	width:20px;
	padding:0 0 0 0;
	margin:0px 0 0 0;
	float:left;
}
.config_items_add_to_show{
	width:60px;
	top:18px;
	padding:0 5px 0 5px;
}
.config_items_add_to_noshow{
	width:60px;
	top:18px;
	padding:0 5px 0 5px;
}
.config_items_font{
	font-size:10px;
}
.page_nav{
    width:100%;    
}

.page_nav_operator
{
    float:left;
    padding:2px 0px 10px 10px; 
}
.page_nav li{
    float:left;
    list-style:none;
    border:1px #FFFFFF solid;
    padding: 3px 5px 3px 5px;
    margin:5px 3px 3px 5px;
}
.page_nav li:hover{
    background:#4281B7;    
}
#id_items_list{
    position:relative;
    height:450px;
    width:100%;
    display:block;
    padding:0 0 0 0;
    margin: 0 0 0 0;
    background:#FFFFFF;
    overflow-y:scroll;
    clear:both;
}
.config_items_item {height:50px;display:block;clear:both; padding: 2px 0 0 0; margin: 0 0 0 0;}
.config_items_item_odd {background:#eeeeee;}
.config_items_item div {float:left;}
.config_items_item_status
{	
	width:10px;
	padding:0 5px 0 5px;
	margin: 0 0 0 0;
	left:-1px;	
}

</style>

<div class="config">
	<div class="config_search">
	<#include "config_introduct.html">
	<#include "config_content.html">
	</div>
	<div class="" id="id_config_items_content" title="Basic modal dialog">
        <div class="config_items">
        	<#include "config_search.html">
        	<form class="ym-form linearize-form ym-columnar config_items_title" >
            	<div class="config_items_checkbox config_items_font" style="margin-top:0px;">
                	<input type="checkbox" name="select_all" id="items_select_all" style="top:3px"/>
            		<label for="items_select_all" style="padding:0 0 0 0;margin:0 0 0 0;">全选</label>
            	</div>
            	<div class="config_item_status_title config_items_font">
            		状态
            	</div>            
            	<div class="config_items_item_title config_items_font" style="text-align:center;">
            		商品名称
            	</div>
            </form>
        	
        	<div id="id_items_list"></div>
        	<div class="page_nav config_items_font" id="id_config_items_page_nav">
        	    <div class ="page_nav_operator" id="id_config_items_page_nav_bat">
        	        <li id="id_config_items_page_nav_force_inshow" title="index.html/showdatamanager?action=forceShow"><a>加入强制推荐</a></li>
        	        <li id="id_config_items_page_nav_force_no_inshow" title="index.html/showdatamanager?action=forbidShow"><a>加入禁止推荐</a></li>
        	        <li id="id_config_items_page_nav_normal" title="index.html/showdatamanager?action=normalShow"><a>恢复普通推荐</a></li>
        	        <div style="float:left;margin: 0 0 0 80px;font-color:#ff0000;">已强制推荐个数<b style="font-size:20px;">10</b></div>
        	    </div>

        	    <li title="index.html/showconfigitemmanager?action=head"><a>头页</a></li>
                <li title="index.html/showconfigitemmanager?action=pre"><a>上页</a></li>
        	    <li><input type="text" value="1" id="id_config_items_jmp_to"style="width:20px;margin:0 0px 0 0px;"/></li>
        	    <li id="id_config_items_page_nav_total">5</li>
        	    <li title="index.html/showconfigitemmanager?action=jmpto"><a>跳到</a></li>
        	    <li onclick="getAllInfo()" title="index.html/showconfigitemmanager?action=next"><a>下页</a></li>
        	    <li class="box" title="index.html/showconfigitemmanager?action=tail"><a>尾页</a></li>
            </div>
            <li id="id_config_status" value="config" style="display:none;"></li>
        </div>
	</div>
</div>

<script type="text/javascript">
function getAllInfo()
{
    var $keyword = $("#id_config_items_keyword").val();
    var $cat = $("#id_config_items_search_cata").find("option:selected").val();
    var $inshow =  $("#id_config_items_inshow").find("option:selected").val();
    var $sort =  $("#id_config_items_sort").find("option:selected").val();
    var $pitem =  $("#id_config_items_page_item_no").find("option:selected").val();
    var $jmpto =  $("#id_config_items_jmp_to").val();
    var $curpage =  $("#id_config_items_curpage").val();
    var $status = $("#id_config_status").text();
    var $idlist ="id=";
    $("#id_items_list :checkbox").each(function(){
        if ($(this).attr("checked") == "checked")
        {
              $idlist = $idlist +  $(this).attr("id") +":";
        }
    });
    
    console.log ("cur_page:" + $(id_config_items_curpage).attr("value"));
    console.log("keyword:"+$keyword);
    console.log("cat:"+$cat);
    console.log("inshow:"+$inshow);
    console.log("pitem:"+$pitem);
    console.log("jmpto:"+$jmpto);
    console.log("idlist:"+$idlist);
    console.log("curpage:"+$curpage);
    console.log("status:"+$status);
    console.log("&" + $idlist + "&keyword=" + $keyword + "&cat=" + $cat + "&inshow=" + $inshow + "&sort="+ $sort + "&pitem="+ $pitem + "&jmpto="+ $jmpto);
    
    return encodeURI($idlist + "&keyword=" + $keyword + "&cat=" + $cat + "&inshow=" + $inshow + "&sort="+ 
                     $sort + "&pitem="+ $pitem + "&jmpto="+ $jmpto + "&curpage="+$curpage + "&status=" + $status);
}

function getAllItemSelect()
{
    var $list = new Array();
    $("#id_items_list :checkbox").each(function(){
        if ($(this).attr("checked") == "checked")
        {
            if ($(this).attr("checked") == "checked")
            {
                $list.push($(this).attr("id"));
            }
        }
    });
    return $list;    
}

$(document).ready(function(){

    $("#id_config_items_content").hide();
    
    $("#id_config_items_page_nav_bat li").livequery("click", function(){
        var $list = getAllItemSelect();
        var $str = "";
        console.log ($list);
         
        for ($i = 0; $i < $list.length; $i=$i + 1)
            $str = $list[$i] + ":" + $str;
        
    })
    
    $("#id_config_items_page_nav > li").livequery("click",function(){
		var $to = $(this).attr("title");
		var _self = this;
		$to = "${ip}/" + $to + "&ct=0&" + getAllInfo();
		$("#runing").dialog('open');
		console.log ("to:" + $to);
				
		$("#id_items_list").load($to,function(){
		    var $cur = $("#id_config_items_curpage").val();
		    var $total = $("#id_config_items_totalpage").val();
		    $("#id_config_items_jmp_to").attr("value", $cur);
		    $("#id_config_items_page_nav_total").text("共"+$total+"页");
		    console.log ("page" + $cur + "/" + $total);
		    $("#runing").dialog('close');
		    $(".config_items_item:odd").addClass("config_items_item_odd");
		});
    })

    $("#id_config_search_button").livequery("click",function(){
		var $to = $(this).attr("title");
		var _self = this;
		$to = "${ip}/" + $to + "&ct=0&" + getAllInfo();
		$("#runing").dialog('open');
		//console.log ("to:" + $to);
				
		$("#id_items_list").load($to,function(){
		    var $cur = $("#id_config_items_curpage").val();
		    var $total = $("#id_config_items_totalpage").val();
		    $("#id_config_items_jmp_to").attr("value", $cur);
		    $("#id_config_items_page_nav_total").text("共"+$total+"页");
		    console.log ("page" + $cur + "/" + $total);
		    $("#runing").dialog('close');
		    $(".config_items_item:odd").addClass("config_items_item_odd");
		});
    })
    
    
	$("#select_show_forever").livequery("click",function(){
		var $to = $(this).attr("title");
		var _self = this;
		$to = "${ip}/" + $to + "&ct=0"
		$("#runing").dialog('open');
		
		$("#id_items_list").load($to,function(){
		    $("#id_config_items_content").dialog({
			    height: 600,
		        width: 900,
		        draggable:true,
		        resizable:true,
                modal: true,
                title: "选择始终推荐的商品(细化的搜索条件，有利于提高工作效率)"      
		        });
		    var $cur = $("#id_config_items_curpage").val();
		    var $total = $("#id_config_items_totalpage").val();
		    $("#id_config_items_jmp_to").attr("value", $cur);
		    $("#id_config_items_page_nav_total").text("共"+$total+"页");
		    $("#id_config_status").text("forever");
		    
		    $("#runing").dialog('close');
		    $(".config_items_item:odd").addClass("config_items_item_odd");
		});
	})

	$("#select_show_never").livequery("click",function(){
		var $to = $(this).attr("title");
		var _self = this;
		$to = "${ip}/" + $to + "&ct=0"
		$("#id_items_list").load($to,function(){$("#runing").removeClass("cover_active");});
		$( "#id_config_items_content" ).dialog({
		    height: 500,
		    width: 900,
            modal: true,
            title: "Dialog Title" ,
            zIndex:1000,
	    });
	})

    $("#items_select_all").livequery("change",function(){
       if ($("#items_select_all").attr("checked") == "checked")
           $(".config_items_checkbox input").attr("checked",true);
       else
           $(".config_items_checkbox input").attr("checked",false);  
    });
});
</script>